(function(){var B=YAHOO.util.Dom,z=YAHOO.util.Event,f=YAHOO.util.Element;var y=Alfresco.util.encodeHTML,t=Alfresco.util.combinePaths,s=Alfresco.util.siteURL;var a="org.alfresco.share.documentList",D=a+".hideNavBar";Alfresco.DocListToolbar=function(L){Alfresco.DocListToolbar.superclass.constructor.call(this,"Alfresco.DocListToolbar",L,["button","menu","container"]);this.selectedFiles=[];this.currentFilter={};this.dynamicControls=[];this.doclistMetadata={};this.actionsView="browse";YAHOO.Bubbling.on("filterChanged",this.onFilterChanged,this);YAHOO.Bubbling.on("deactivateAllControls",this.onDeactivateAllControls,this);YAHOO.Bubbling.on("deactivateDynamicControls",this.onDeactivateDynamicControls,this);YAHOO.Bubbling.on("selectedFilesChanged",this.onSelectedFilesChanged,this);YAHOO.Bubbling.on("userAccess",this.onUserAccess,this);YAHOO.Bubbling.on("doclistMetadata",this.onDoclistMetadata,this);YAHOO.Bubbling.on("showFileUploadDialog",this.onFileUpload,this);YAHOO.Bubbling.on("dropTargetOwnerRequest",this.onDropTargetOwnerRequest,this);YAHOO.Bubbling.on("documentDragOver",this.onDocumentDragOver,this);YAHOO.Bubbling.on("documentDragOut",this.onDocumentDragOut,this);YAHOO.Bubbling.on("registerAction",this.onRegisterAction,this);return this};YAHOO.extend(Alfresco.DocListToolbar,Alfresco.component.Base);YAHOO.lang.augmentProto(Alfresco.DocListToolbar,Alfresco.doclib.Actions);YAHOO.lang.augmentObject(Alfresco.DocListToolbar.prototype,{options:{siteId:null,containerId:"documentLibrary",groupActivitiesAt:5,hideNavBar:false,googleDocsEnabled:false,repositoryBrowsing:true,useTitle:true},currentPath:"",currentFilter:null,fileUpload:null,selectedFiles:null,folderDetailsUrl:null,dynamicControls:null,doclistMetadata:null,onReady:function A(){if(B.get(this.id+"-createContent-button")){this.widgets.createContent=Alfresco.util.createYUIButton(this,"createContent-button",this.onCreateContent,{type:"menu",menu:"createContent-menu",lazyloadmenu:false,disabled:true,value:"CreateChildren"});var S=this.widgets.createContent.getMenu(),X=0;if(this.options.createContentActions.length>0){var O=[],L,V,P,Q,T,W;for(var R=0;R<this.options.createContentActions.length;R++){V=this.options.createContentActions[R];Q={parent:S};P=null;if(V.type=="javascript"){Q.onclick={fn:function(aa,Z,ad){var ac=Alfresco.util.deepCopy(this.doclistMetadata.parent);var ab={nodeRef:ac.nodeRef,node:ac,jsNode:new Alfresco.util.Node(ac)};this[ad.params["function"]].call(this,ab)},obj:V,scope:this};P="#"}else{if(V.type=="pagelink"){P=s(V.params.page)}else{if(V.type=="link"){P=V.params.href}}}T='<a href="'+P+'" rel="'+V.permission+'"><span style="background-image:url('+Alfresco.constants.URL_RESCONTEXT+"components/images/filetypes/"+V.icon+'-file-16.png)" class="'+V.icon+'-file">'+this.msg(V.label)+"</span></a>";W=document.createElement("li");W.innerHTML=T;L=new YAHOO.widget.MenuItem(W,Q);O.push(L)}S.addItems(O,X);X++}if(this.options.createContentByTemplateEnabled){var W=document.createElement("li");W.innerHTML='<a href="#"><span>'+this.msg("menu.create-content.by-template-node")+"</span></a>";var N=document.createElement("div");N.innerHTML='<div class="bd"><ul></ul></div>';var U=new YAHOO.widget.MenuItem(W,{parent:S,submenu:N});S.addItems([U],X);X++;var Y=this.widgets.createContent.getMenu().getSubmenus(),M=Y.length>0?Y[0]:null;if(M){M.subscribe("beforeShow",this.onCreateByTemplateNodeBeforeShow,this,true);M.subscribe("click",this.onCreateByTemplateNodeClick,this,true)}}S.render();this.dynamicControls.push(this.widgets.createContent)}this.widgets.newFolder=Alfresco.util.createYUIButton(this,"newFolder-button",this.onNewFolder,{disabled:true,value:"CreateChildren"});this.dynamicControls.push(this.widgets.newFolder);this.widgets.fileUpload=Alfresco.util.createYUIButton(this,"fileUpload-button",this.onFileUpload,{disabled:true,value:"CreateChildren"});this.dynamicControls.push(this.widgets.fileUpload);this.widgets.syncToCloud=Alfresco.util.createYUIButton(this,"syncToCloud-button",this.onSyncToCloud,{disabled:true,value:"CreateChildren"});this.dynamicControls.push(this.widgets.syncToCloud);this.widgets.unsyncFromCloud=Alfresco.util.createYUIButton(this,"unsyncFromCloud-button",this.onUnsyncFromCloud,{disabled:true,value:"CreateChildren"});this.dynamicControls.push(this.widgets.unsyncFromCloud);this.widgets.selectedItems=Alfresco.util.createYUIButton(this,"selectedItems-button",this.onSelectedItems,{type:"menu",menu:"selectedItems-menu",lazyloadmenu:false,disabled:true});this.dynamicControls.push(this.widgets.selectedItems);this.widgets.hideNavBar=Alfresco.util.createYUIButton(this,"hideNavBar-button",this.onHideNavBar,{type:"checkbox",checked:this.options.hideNavBar});if(this.widgets.hideNavBar!==null){this.widgets.hideNavBar.set("title",this.msg(this.options.hideNavBar?"button.navbar.show":"button.navbar.hide"));B.setStyle(this.id+"-navBar","display",this.options.hideNavBar?"none":"block");this.dynamicControls.push(this.widgets.hideNavBar)}this.widgets.rssFeed=Alfresco.util.createYUIButton(this,"rssFeed-button",null,{type:"link"});this.dynamicControls.push(this.widgets.rssFeed);this.widgets.folderUp=Alfresco.util.createYUIButton(this,"folderUp-button",this.onFolderUp,{disabled:true,title:this.msg("button.up")});this.dynamicControls.push(this.widgets.folderUp);this.modules.actions=new Alfresco.module.DoclibActions();this.modules.docList=Alfresco.util.ComponentManager.findFirst("Alfresco.DocumentList");this.services.preferences=new Alfresco.service.Preferences();B.setStyle(this.id+"-body","visibility","visible")},onCreateContent:function w(P,O,N){var M=O[1],L=M.element.getElementsByTagName("a")[0];if(M.parent===this.widgets.createContent.getMenu()&&L&&L.nodeName=="A"){L.href=YAHOO.lang.substitute(L.href,{nodeRef:this.doclistMetadata.parent.nodeRef});if(L.href.indexOf("%7BnodeRef%7D")!==-1){L.href=L.href.replace("%7BnodeRef%7D",encodeURIComponent(this.doclistMetadata.parent.nodeRef))}}},onCreateByTemplateNodeBeforeShow:function C(){var L=this.widgets.createContent.getMenu().getSubmenus()[0];if(L.getItems().length==0){L.clearContent();L.addItem(this.msg("label.loading"));L.render();Alfresco.util.Ajax.jsonGet({url:Alfresco.constants.PROXY_URI+"slingshot/doclib/node-templates",successCallback:{fn:function(O,S){var N=O.json.data,R=[],P;for(var Q=0,M=N.length;Q<M;Q++){node=N[Q];P=y(node.name);if(node.title&&node.title!==node.name&&this.options.useTitle){P+='<span class="title">('+y(node.title)+")</span>"}R.push({text:'<span title="'+y(node.description)+'">'+P+"</span>",value:node})}if(R.length==0){R.push(this.msg("label.empty"))}L.clearContent();L.addItems(R);L.render()},scope:this}})}},onCreateByTemplateNodeClick:function G(P,O,N){var M=O[1].value,L=this.doclistMetadata.parent.nodeRef;if(M){Alfresco.util.Ajax.jsonPost({url:Alfresco.constants.PROXY_URI+"slingshot/doclib/node-templates",dataObj:{sourceNodeRef:M.nodeRef,parentNodeRef:L},successCallback:{fn:function(Q){YAHOO.Bubbling.fire("nodeCreated",{name:M.name,parentNodeRef:L,highlightFile:Q.json.name})}},successMessage:this.msg("message.create-content-by-template-node.success",M.name),failureMessage:this.msg("message.create-content-by-template-node.failure",M.name)})}},onNewFolder:function u(P,S){var R=this.doclistMetadata.parent.nodeRef;var T=function N(U,V){B.get(V.id+"-dialogTitle").innerHTML=this.msg("label.new-folder.title");B.get(V.id+"-dialogHeader").innerHTML=this.msg("label.new-folder.header")};var L=YAHOO.lang.substitute(Alfresco.constants.URL_SERVICECONTEXT+"components/form?itemKind={itemKind}&itemId={itemId}&destination={destination}&mode={mode}&submitType={submitType}&formId={formId}&showCancelButton=true",{itemKind:"type",itemId:"cm:folder",destination:R,mode:"create",submitType:"json",formId:"doclib-common"});var O=new Alfresco.module.SimpleDialog(this.id+"-createFolder");O.setOptions({width:"33em",templateUrl:L,actionUrl:null,destroyOnHide:true,doBeforeDialogShow:{fn:T,scope:this},onSuccess:{fn:function Q(U){var V=U.config.dataObj.prop_cm_name;YAHOO.Bubbling.fire("folderCreated",{name:V,parentNodeRef:R});Alfresco.util.PopupManager.displayMessage({text:this.msg("message.new-folder.success",V)})},scope:this},onFailure:{fn:function M(U){if(U){var V=U.config.dataObj.prop_cm_name;Alfresco.util.PopupManager.displayMessage({text:this.msg("message.new-folder.failure",V)})}else{Alfresco.util.PopupManager.displayMessage({text:this.msg("message.failure")})}},scope:this}}).show()},onSyncToCloud:function m(O,P){var L=new Object();var M=this.doclistMetadata.parent;L.displayName=M.properties["cm:name"];L.nodeRef=M.nodeRef;var N=new Object();N.isContainer=M.isContainer;L.jsNode=N;this.onActionCloudSync(L)},onUnsyncFromCloud:function r(P,Q){var L=new Object();var N=this.doclistMetadata.parent;var O=new Object();O.isContainer=N.isContainer;L.jsNode=O;var M=new Object();M.uri=N.nodeRef.replace(":/","");O.nodeRef=M;L.displayName=N.properties["cm:name"];this.onActionCloudUnsync(L)},onFileUpload:function n(N,O){if(this.fileUpload===null){this.fileUpload=Alfresco.getFileUploadInstance()}var L={siteId:this.options.siteId,containerId:this.options.containerId,uploadDirectory:this.currentPath,filter:[],mode:this.fileUpload.MODE_MULTI_UPLOAD,thumbnails:"doclib",onFileUploadComplete:{fn:this.onFileUploadComplete,scope:this}};this.fileUpload.show(L);if(YAHOO.lang.isArray(O)&&O[1].tooltip){var M=Alfresco.util.createBalloon(this.fileUpload.uploader.id+"-dialog",{html:O[1].tooltip,width:"30em"});M.show();this.fileUpload.uploader.widgets.panel.hideEvent.subscribe(function(){M.hide()})}},onFileUploadWithTooltip:function I(L,M){this.onFileUpload(L,M)},onFileUploadComplete:function x(L){var P=L.successful.length,M,O;if(P>0){if(P<(this.options.groupActivitiesAt||5)){for(var N=0;N<P;N++){O=L.successful[N];M={fileName:O.fileName,nodeRef:O.nodeRef};this.modules.actions.postActivity(this.options.siteId,"file-added","document-details",M)}}else{M={fileCount:P,path:this.currentPath,parentNodeRef:this.doclistMetadata.parent.nodeRef};this.modules.actions.postActivity(this.options.siteId,"files-added","documentlibrary",M)}}},onSelectedItems:function o(Q,P,O){var M=P[0],N=P[1];if(this.modules.docList){var L=Alfresco.util.findEventClass(N);if(L&&(typeof this[L]=="function")){this[L].call(this,this.modules.docList.getSelectedFiles())}}z.preventDefault(M)},onActionDelete:function q(L){var Q=this,M=[];for(var P=0,N=L.length;P<N;P++){M.push('<span class="'+(L[P].jsNode.isContainer?"folder":"document")+'">'+y(L[P].displayName)+"</span>")}var T=this.msg("title.multiple-delete.confirm"),O=this.msg("message.multiple-delete.confirm",L.length);O+='<div class="toolbar-file-list">'+M.join("")+"</div>";Alfresco.util.PopupManager.displayPrompt({title:T,text:O,noEscape:true,modal:true,buttons:[{text:this.msg("button.delete"),handler:function S(){this.destroy();Q._onActionDeleteConfirm.call(Q,L)}},{text:this.msg("button.cancel"),handler:function R(){this.destroy()},isDefault:true}]})},_onActionDeleteConfirm:function j(L){var Q=[],M,P;for(M=0,P=L.length;M<P;M++){Q.push(L[M].jsNode.nodeRef.nodeRef)}var O=function N(V,S){var R;var U=0;if(!V.json.overallSuccess){Alfresco.util.PopupManager.displayMessage({text:this.msg("message.multiple-delete.failure")});return}YAHOO.Bubbling.fire("filesDeleted");for(M=0,P=V.json.totalResults;M<P;M++){R=V.json.results[M];if(R.success){U++;YAHOO.Bubbling.fire(R.type=="folder"?"folderDeleted":"fileDeleted",{multiple:true,nodeRef:R.nodeRef})}}if(Alfresco.util.isValueSet(this.options.siteId)){var T;if(U>0){if(U<this.options.groupActivitiesAt){for(M=0;M<U;M++){T={fileName:V.json.results[M].id,nodeRef:V.json.results[M].nodeRef,path:this.currentPath};this.modules.actions.postActivity(this.options.siteId,"file-deleted","documentlibrary",T)}}else{T={fileCount:U,path:this.currentPath,parentNodeRef:this.doclistMetadata.parent.nodeRef};this.modules.actions.postActivity(this.options.siteId,"files-deleted","documentlibrary",T)}}}Alfresco.util.PopupManager.displayMessage({text:this.msg("message.multiple-delete.success",U)})};this.modules.actions.genericAction({success:{callback:{fn:O,scope:this,obj:L}},failure:{message:this.msg("message.multiple-delete.failure")},webscript:{method:Alfresco.util.Ajax.DELETE,name:"files"},wait:{message:this.msg("message.multiple-delete.please-wait")},config:{requestContentType:Alfresco.util.Ajax.JSON,dataObj:{nodeRefs:Q}}})},onActionDeselectAll:function J(){if(this.modules.docList){this.modules.docList.selectFiles("selectNone")}},onHideNavBar:function K(L,M){this.options.hideNavBar=this.widgets.hideNavBar.get("checked");this.widgets.hideNavBar.set("title",this.msg(this.options.hideNavBar?"button.navbar.show":"button.navbar.hide"));B.setStyle(this.id+"-navBar","display",this.options.hideNavBar?"none":"block");this.services.preferences.set(D,this.options.hideNavBar);if(L){z.preventDefault(L)}},onFolderUp:function h(N,O){var M=this.currentPath.substring(0,this.currentPath.lastIndexOf("/")),L=this.currentFilter;L.filterData=M;YAHOO.Bubbling.fire("changeFilter",L);z.preventDefault(N)},onFilterChanged:function E(P,Q){this._handleSyncButtons();var N=Q[1];if(N&&(typeof N.filterId!=="undefined")){N.filterOwner=N.filterOwner||Alfresco.util.FilterManager.getOwner(N.filterId);if(N.filterOwner){if(this.currentFilter.filterOwner!=N.filterOwner||this.currentFilter.filterId!=N.filterId){var U=N.filterOwner.split(".")[1],T=U+"_"+N.filterId;var R=YAHOO.util.Selector.query("div.hideable",B.get(this.id)),L;for(var O=0,M=R.length;O<M;O++){L=R[O];if(B.hasClass(L,U)||B.hasClass(L,T)){B.removeClass(L,"toolbar-hidden")}else{B.addClass(L,"toolbar-hidden")}}}}Alfresco.logger.debug("DLTB_onFilterChanged","Old Filter",this.currentFilter);this.currentFilter=Alfresco.util.cleanBubblingObject(N);Alfresco.logger.debug("DLTB_onFilterChanged","New Filter",this.currentFilter);if(this.currentFilter.filterId=="path"||this.currentFilter.filterId=="category"){this.currentPath=t("/",this.currentFilter.filterData);this._generateBreadcrumb();var S=this.currentPath.split("/");if(this.currentPath==="/"){S=["/"]}this.widgets.folderUp.set("disabled",S.length<2)}else{this._generateDescription()}this._generateRSSFeedUrl()}},_handleSyncButtons:function g(){var L=B.get(this.id+"-syncToCloud-button");var P=B.get(this.id+"-unsyncFromCloud-button");var N=this.doclistMetadata.parent;if(N){var O=N.aspects;if(O){if(Alfresco.util.arrayContains(O,"sync:syncSetMemberNode")){B.removeClass(P,"hidden");B.addClass(L,"hidden")}else{B.removeClass(L,"hidden");B.addClass(P,"hidden")}}var M=N.properties;if(M&&(M["cm:name"]==="documentLibrary"||M["sync:directSync"]==="false")||this.options.syncMode!=="ON_PREMISE"){B.addClass(P,"hidden");B.addClass(L,"hidden")}}},onDeactivateAllControls:function k(N,M){var L,O=Alfresco.util.disableYUIButton;for(L in this.widgets){if(this.widgets.hasOwnProperty(L)){O(this.widgets[L])}}},onDeactivateDynamicControls:function H(N,M){var L,O=Alfresco.util.disableYUIButton;for(L in this.dynamicControls){if(this.dynamicControls.hasOwnProperty(L)){O(this.dynamicControls[L])}}},onUserAccess:function b(R,T){var M=function U(ag,W){var af,ak,ai,X,aj,ab,ae=false,V,Z,ad;if(ag instanceof YAHOO.widget.MenuItem&&ag.element.firstChild){ae=true;af=ag.element.firstChild.rel;V=Alfresco.util.bind(ag.cfg.setProperty,ag.cfg,"className","");Z=Alfresco.util.bind(ag.cfg.setProperty,ag.cfg,"className","hidden")}else{af=ag.get("value");V=Alfresco.util.bind(ag.set,ag,"disabled",false);Z=Alfresco.util.bind(ag.set,ag,"disabled",true)}V();if(typeof af=="string"&&af!==""){ak=af.split(",");for(var aa=0,ah=ak.length;aa<ah;aa++){if(ak[aa].indexOf("|")!==-1){ab=false;ai=ak[aa].split("|");for(var Y=0,ac=ai.length;Y<ac;Y++){X=ai[Y].split(":");aj=X[0];ad=X.length==2?X[1]=="true":true;if((W[aj]&&ad)||(!W[aj]&&!ad)){ab=true;if(!ae){ag.set("activePermission",ai[Y],true)}break}}if(!ab){Z();break}}else{X=ak[aa].split(":");aj=X[0];ad=X.length==2?X[1]=="true":true;if((W[aj]&&!ad)||(!W[aj]&&ad)){Z();break}}}}};var O=T[1];if(O&&O.userAccess){var P,S,L;for(S in this.widgets){if(this.widgets.hasOwnProperty(S)){P=this.widgets[S];if(P.get("srcelement").className!="no-access-check"){M(P,O.userAccess);if(P.getMenu()!==null){L=P.getMenu().getItems();for(var N=0,Q=L.length;N<Q;N++){M(L[N],O.userAccess)}}}}}}},onSelectedFilesChanged:function F(ah,O){if(this.modules.docList){var S=this.modules.docList.getSelectedFiles(),N=[],ae,P,af={},ad,T,ai=this.widgets.selectedItems.getMenu().getItems(),R,M,V,Y,Q,U=[],ag=[],aa,W,Z,ac;var ab=function ab(aj){return(aj.node.isContainer?"folder":"document")};for(aa=0,W=S.length;aa<W;aa++){ae=S[aa];ad=ae.node.permissions.user;for(T in ad){if(ad.hasOwnProperty(T)){af[T]=(af[T]===undefined?ad[T]:af[T]&&ad[T])}}P=ab(ae);if(!(P in N)){N[P]=true;N.push(P)}if(aa===0){U=Alfresco.util.deepCopy(ae.node.aspects)}else{for(Z=0,ac=U.length;Z<ac;Z++){if(!Alfresco.util.arrayContains(ae.node.aspects,U[Z])){Alfresco.util.arrayRemove(U,U[Z])}}}for(Z=0,ac=ae.node.aspects.length;Z<ac;Z++){if(!Alfresco.util.arrayContains(ag,ae.node.aspects[Z])){ag.push(ae.node.aspects[Z])}}}for(T in ai){if(ai.hasOwnProperty(T)){R=ai[T];Q=false;if(R.element.firstChild){if(R.element.firstChild.rel&&R.element.firstChild.rel!==""){M=R.element.firstChild.rel.split(",");for(aa=0,W=M.length;aa<W;aa++){if(!af[M[aa]]){Q=true;break}}}var L=B.getAttribute(R.element.firstChild,"data-has-aspects");if(L&&L!==""){L=L.split(",");for(aa=0,W=L.length;aa<W;aa++){if(!Alfresco.util.arrayContains(U,L[aa])){Q=true;break}}}var X=B.getAttribute(R.element.firstChild,"data-not-aspects");if(X&&X!==""){X=X.split(",");for(aa=0,W=X.length;aa<W;aa++){if(Alfresco.util.arrayContains(ag,X[aa])){Q=true;break}}}if(!Q){if(R.element.firstChild.type&&R.element.firstChild.type!==""){V=R.element.firstChild.type.split("|");for(aa=0;aa<V.length;aa++){Y=Alfresco.util.arrayToObject(V[aa].split(","));for(Z=0,ac=N.length;Z<ac;Z++){if(!(N[Z] in Y)){V.splice(aa,1);--aa;break}}}Q=(V.length===0)}}R.cfg.setProperty("disabled",Q)}}}this.widgets.selectedItems.set("disabled",(S.length===0))}},onDoclistMetadata:function v(M,L){var N=L[1];this.folderDetailsUrl=null;if(N&&N.metadata){this.doclistMetadata=Alfresco.util.deepCopy(N.metadata);if(N.metadata.parent&&N.metadata.parent.nodeRef){this.folderDetailsUrl=s("folder-details?nodeRef="+N.metadata.parent.nodeRef)}}},onDropTargetOwnerRequest:function d(P,Q){if(Q&&Q[1]&&Q[1].elementId){var S=B.get(Q[1].elementId);var L=B.get(this.id+"-breadcrumb");if(B.isAncestor(L,S)){var M="";var T=this.currentPath.split("/");for(var O=0,N=L.children.length;O<N;O++){if(O%2==0){M=M+"/"+T[O/2]}if(S==L.children[O]){break}}var R=this.doclistMetadata.container+M;Q[1].callback.call(Q[1].scope,R,M)}}},onDocumentDragOver:function c(O,N){if(N&&N[1]&&N[1].elementId){var M=B.get(N[1].elementId);var L=B.get(this.id+"-breadcrumb");if(B.isAncestor(L,M)){B.addClass(M,"documentDragOverHighlight");var Q=B.getFirstChild(M);if(Q!=null&&Q.tagName!="SPAN"){var P=document.createElement("span");B.addClass(P,"documentDragOverArrow");B.insertBefore(P,Q)}}}},onDocumentDragOut:function l(O,N){if(N&&N[1]&&N[1].elementId){var M=B.get(N[1].elementId);var L=B.get(this.id+"-breadcrumb");if(B.isAncestor(L,M)){B.removeClass(M,"documentDragOverHighlight");var P=B.getFirstChild(M);if(P!=null&&P.tagName=="SPAN"){M.removeChild(P)}}}},_generateBreadcrumb:function p(){var S=B.get(this.id+"-breadcrumb");if(S===null){return}S.innerHTML="";var aa=this.currentPath.split("/");if(this.currentPath==="/"){aa=["/"]}var T=this,V=aa.concat();V[0]=Alfresco.util.message("node.root",this.currentFilter.filterOwner);var U=function M(ad,ac){B.addClass(ad.target.parentNode,"highlighted");z.stopEvent(ad)};var ab=function P(ae,ad){var ac=T.currentFilter;ac.filterData=ad;YAHOO.Bubbling.fire("changeFilter",ac);z.stopEvent(ae)};var Y=new f(S),Q,R,L,Z;for(var O=0,N=aa.length;O<N;++O){Q=aa.slice(0,O+1).join("/");R=new f(document.createElement("div"));R.addClass("crumb");R.addClass("documentDroppable");R.addClass("documentDroppableHighlights");if(O>0){L=new f(document.createElement("a"),{href:"#",innerHTML:"&nbsp;"});L.on("click",ab,Q);L.addClass("icon");L.addClass("filter-"+y(this.currentFilter.filterId));R.appendChild(L)}if(N-O<2){Z=new f(document.createElement("span"),{innerHTML:(this.folderDetailsUrl)?'<a href="'+this.folderDetailsUrl+'">'+y(V[O])+"</a>":y(V[O])});Z.addClass("label");R.appendChild(Z);Y.appendChild(R)}else{Z=new f(document.createElement("a"),{href:"",innerHTML:y(V[O])});Z.addClass("folder");Z.on("click",ab,Q);R.appendChild(Z);Y.appendChild(R);Y.appendChild(new f(document.createElement("div"),{innerHTML:"&gt;",className:"separator"}))}}var X=B.get(this.id+"-breadcrumb");var W=B.getElementsByClassName("crumb","div",X);for(var O=0,N=W.length;O<N;O++){new YAHOO.util.DDTarget(W[O])}},_generateDescription:function e(){var N,Q,M,L,O;N=B.get(this.id+"-description");if(N===null){return}while(N.hasChildNodes()){N.removeChild(N.lastChild)}O=typeof this.currentFilter.filterDisplay!=="undefined"?this.currentFilter.filterDisplay:(this.currentFilter.filterData||"");M=new f(document.createElement("div"),{innerHTML:this.msg("description."+this.currentFilter.filterId,O)});M.addClass("message");var R="description."+this.currentFilter.filterId+".more",P=R+".filterDisplay";if(O!==""&&this.msg(P)!==P){R=P}L=new f(document.createElement("span"),{innerHTML:this.msg(R,y(O))});L.addClass("more");M.appendChild(L);Q=new f(N);Q.appendChild(M)},_generateRSSFeedUrl:function i(){if(this.widgets.rssFeed&&this.modules.docList){var L=YAHOO.lang.substitute("{type}/site/{site}/{container}{path}",{type:this.modules.docList.options.showFolders?"all":"documents",site:encodeURIComponent(this.options.siteId),container:encodeURIComponent(this.options.containerId),path:Alfresco.util.encodeURIPath(this.currentPath)});L+="?filter="+encodeURIComponent(this.currentFilter.filterId);if(this.currentFilter.filterData){L+="&filterData="+encodeURIComponent(this.currentFilter.filterData)}L+="&format=rss";this.widgets.rssFeed.set("href",Alfresco.constants.URL_FEEDSERVICECONTEXT+"components/documentlibrary/feed/"+L);Alfresco.util.enableYUIButton(this.widgets.rssFeed)}}},true)})();