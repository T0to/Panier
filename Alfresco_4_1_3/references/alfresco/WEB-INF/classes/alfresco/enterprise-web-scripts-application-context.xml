<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE beans PUBLIC '-//SPRING//DTD BEAN//EN' 'http://www.springframework.org/dtd/spring-beans-2.0.dtd'>

<beans>
   
   <!--                                                -->
   <!--  Web Script Storage (for Enterprise Extension) -->
   <!--                                                -->
   
   <!-- Webscripts for Cloud Sync -->
   <import resource="classpath*:alfresco/sync-rest-api-context.xml" />
   
   <!-- Webscripts for Cloud Sync (Cloud Side) -->
   <!-- FIXME These should be on the Cloud Server, but not On Premise -->
   <import resource="classpath*:alfresco/sync-cloud-rest-api-context.xml" />
   
   <bean id="webscripts.enterprise.store" parent="webscripts.classpathstore">
      <property name="mustExist"><value>true</value></property>
      <property name="classPath"><value>alfresco/enterprise/webscripts</value></property>
   </bean>
   
   <bean id="webscripts.searchpath" class="org.springframework.extensions.webscripts.SearchPath">
      <property name="searchPath">
          <list>
             <ref bean="webscripts.store.repo.extension" />
             <ref bean="webscripts.store.repo" />
             <ref bean="webscripts.store.client.extension" />
             <ref bean="webscripts.store.client" />
             <ref bean="webscripts.enterprise.store" />
             <ref bean="webscripts.store.alfresco" />
             <ref bean="webscripts.store" />
          </list>
      </property>
   </bean>
   
   <!-- Java-backed Web Scripts for the bulk filesystem importer -->
     
   <!-- Custom javascript root object that interfaces to batch import. -->
   <bean id="bfsiEnterpriseScript" parent="baseJavaScriptExtension" class="org.alfresco.repo.bulkimport.script.BulkImport">
      <property name="extensionName"    value="enterpriseBulkFSImport" />
      <property name="storeMapProvider" ref="storeSelectorMapProvider" />
   </bean>
   
  <!-- import in place -->
  <bean id="webscript.org.alfresco.enterprise.repository.bulkfilesystemimport.initiate-inplace.post"
        class="org.alfresco.enterprise.repo.web.scripts.bulkimport.inplace.BulkFilesystemImportWebScript"
        parent="bfsiAbstractImportWebscript">
     <property name="bulkImporter"         ref="bulkFilesystemImporter" />
     <property name="nodeImporterFactory"  ref="inPlaceNodeImporterFactory" />
  </bean>
  
  <bean id="webscript.org.alfresco.enterprise.repository.bulkfilesystemimport.status-inplace.get"
        class="org.alfresco.repo.web.scripts.bulkimport.BulkFilesystemImportStatusWebScript"
        parent="webscript">
     <property name="bulkImporter"         ref="bulkFilesystemImporter" />
  </bean>

  <!-- Multi-Tenancy Information -->
  <bean id="webscript.org.alfresco.enterprise.repository.tenant.information.get"
        class="org.alfresco.enterprise.repo.web.scripts.tenant.TenantInformationGet"
        parent="webscript">
     <property name="tenantService" ref="tenantService" />
  </bean>
</beans>
